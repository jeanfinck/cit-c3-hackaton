<?php
/**
 * @file
 * Implements a Q&A platform for CI&T collaborators.
 */

define('CONTRIBUTE_QUESTION_CONTENT_TYPE', 'question');

module_load_include('inc', 'contribute', 'contribute.question');
module_load_include('inc', 'contribute', 'contribute.answer');
module_load_include('inc', 'contribute', 'contribute.comment');
module_load_include('inc', 'contribute', 'contribute.debug');

/**
 * Define menu items and page callbacks.
 *
 * @return array
 *   An array of menu items.
 */
function contribute_menu() {
  $items = array(

    'questions/ask' => array(
      'title' => 'Ask a Question',
      'access callback' => 'user_is_logged_in',
      'page callback' => 'drupal_get_form',
      'page arguments' => array('contribute_question_form'),
    ),

  );

  return $items;
}

/**
 * Define all blocks provided by the module.
 *
 * @return array
 *   An associative array whose keys define the delta for each
 *   block and whose values contain the block descriptions.
 */
function contribute_block_info() {
  // This example comes from node.module.
  $blocks['advice_accept'] = array(
    'info' => t('Accept advice'),
    'cache' => DRUPAL_CACHE_GLOBAL,
    'status' => 1,
    'region' => 'content',
    'visibility' => BLOCK_VISIBILITY_LISTED,
    'pages' => 'questions/ask/advice',
  );

  return $blocks;
}

/**
 * Return a rendered or renderable view of a block.
 *
 * @return array
 *   An array containing the following elements: subject and content.
 */
function contribute_block_view($delta = '') {
  // This example is adapted from node.module.
  $block = array();

  switch ($delta) {
    case 'advice_accept':
      $block['subject'] = t('');
      $block['content'] = drupal_get_form('contribute_advice_accept_form');
      break;
  }
  return $block;
}
